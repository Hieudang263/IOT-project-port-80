<!DOCTYPE HTML>
<html lang="vi">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bảng điều khiển YOLO UNO</title>

  <!-- CSS -->
  <link rel="stylesheet" href="styles.css">

  <!-- Thư viện -->
  <script src="https://cdn.jsdelivr.net/npm/raphael@2.3.0/raphael.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/justgage@1.3.5/justgage.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>

<body>

  <!-- Thanh bên -->
  <div class="sidebar">
    <div class="logo-container">
      <img class="logo-img"
        src="data:image/png;base64,...(bỏ qua logo cho ngắn)..." alt="Logo">
    </div>

    <div class="nav-item active" onclick="showSection('home', event)">🏠 <span>Trang chủ</span></div>
    <div class="nav-item" onclick="showSection('device', event)">⚡ <span>Thiết bị</span></div>
    <div class="nav-item" onclick="showSection('info', event)">ℹ️ <span>Thông tin</span></div>
    <div class="nav-item" onclick="showSection('settings', event)">⚙️ <span>Cài đặt</span></div>
  </div>

  <!-- Nội dung chính -->
  <div class="main-content">

    <!-- TRANG CHỦ -->
    <div id="home" class="section fade-in">
      <header>
        <h1>Bảng điều khiển môi trường</h1>
        <p>Giám sát nhiệt độ và độ ẩm theo thời gian thực</p>
      </header>

      <div class="gauges-container">
        <div class="gauge-card">
          <h2>🌡️ Nhiệt độ (°C)</h2>
          <div id="gauge_temp"></div>
        </div>

        <div class="gauge-card">
          <h2>💧 Độ ẩm (%)</h2>
          <div id="gauge_humi"></div>
        </div>
      </div>
    </div>

    <!-- THIẾT BỊ -->
    <div id="device" class="section" style="display:none;">
      <header>
        <h1>Điều khiển Relay</h1>
        <p>Quản lý và điều khiển các relay được kết nối.</p>
      </header>

      <div class="device-list" id="relayContainer"></div>

      <button class="add-relay-btn" onclick="openAddRelayDialog()">
        <i class="fa-solid fa-plus"></i>
      </button>
    </div>

    <!-- THÔNG TIN -->
    <div id="info" class="section" style="display:none;">
      <header>
        <h1>Thông tin thiết bị</h1>
        <p>Chi tiết hệ thống và firmware sẽ hiển thị tại đây.</p>
      </header>
    </div>

    <!-- CÀI ĐẶT -->
    <div id="settings" class="section settings-section" style="display:none;">
      <div class="settings-card">
        <h2><i class="fa-solid fa-gear"></i> Cấu hình thiết bị</h2>
        <p>Nhập thông tin Wi-Fi và MQTT CoreIOT của bạn bên dưới.</p>

        <form id="settingsForm">
          <!-- WiFi -->
          <div class="input-group">
            <i class="fa-solid fa-wifi"></i>
            <input type="text" id="ssid" placeholder="Tên Wi-Fi (SSID)" required>
          </div>

          <div class="input-group">
            <i class="fa-solid fa-lock"></i>
            <input type="password" id="password" placeholder="Mật khẩu Wi-Fi" required>
          </div>

          <!-- CoreIOT MQTT -->
          <div class="input-group">
            <i class="fa-solid fa-server"></i>
            <input type="text" id="server" placeholder="Server (app.coreiot.io)" required>
          </div>

          <div class="input-group">
            <i class="fa-solid fa-plug"></i>
            <input type="number" id="port" placeholder="Port (1883)" required>
          </div>

          <div class="input-group">
            <i class="fa-solid fa-fingerprint"></i>
            <input type="text" id="client_id" placeholder="Client ID (MQTT)" required>
          </div>

          <div class="input-group">
            <i class="fa-solid fa-user"></i>
            <input type="text" id="mqtt_username" placeholder="Username (MQTT)" required>
          </div>

          <div class="input-group">
            <i class="fa-solid fa-key"></i>
            <input type="password" id="mqtt_password" placeholder="Password (MQTT)">
          </div>

          <button type="submit" class="btn-save">
            <i class="fa-solid fa-floppy-disk"></i> Lưu cấu hình
          </button>
        </form>
      </div>
    </div>
  </div>

  <!-- HỘP THOẠI THÊM RELAY -->
  <div id="addRelayDialog" class="dialog-overlay" style="display:none;">
    <div class="dialog fade-in">
      <h3><i class="fa-solid fa-plug"></i> Thêm relay mới</h3>
      <p>Nhập tên relay và chân GPIO</p>
      <div class="input-field">
        <input type="text" id="relayName" placeholder="Tên relay">
      </div>
      <div class="input-field">
        <input type="number" id="relayGPIO" placeholder="Chân GPIO">
      </div>
      <div class="dialog-buttons">
        <button class="confirm" onclick="saveRelay()">Lưu</button>
        <button class="cancel" onclick="closeAddRelayDialog()">Hủy</button>
      </div>
    </div>
  </div>

  <!-- HỘP THOẠI XÓA -->
  <div id="confirmDeleteDialog" class="dialog-overlay" style="display:none;">
    <div class="dialog warning fade-in">
      <h3>⚠️ Xác nhận xóa</h3>
      <p>Bạn có chắc chắn muốn xóa relay này không?</p>
      <div class="dialog-buttons">
        <button class="danger" onclick="confirmDelete()">Xóa</button>
        <button class="cancel" onclick="closeConfirmDelete()">Hủy</button>
      </div>
    </div>
  </div>

  <!-- JS -->
  <script src="script.js"></script>
</body>

</html>
